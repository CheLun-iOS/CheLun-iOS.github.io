<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>è½¦è½®äº’è”</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="iOSç§»åŠ¨å°ç»„SwiftåŒ–ï¼Œåœ¨æ­¤å¼€ä¸ªåšå®¢ğŸ˜‹">
<meta property="og:type" content="website">
<meta property="og:title" content="è½¦è½®äº’è”">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="è½¦è½®äº’è”">
<meta property="og:description" content="iOSç§»åŠ¨å°ç»„SwiftåŒ–ï¼Œåœ¨æ­¤å¼€ä¸ªåšå®¢ğŸ˜‹">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="è½¦è½®äº’è”">
<meta name="twitter:description" content="iOSç§»åŠ¨å°ç»„SwiftåŒ–ï¼Œåœ¨æ­¤å¼€ä¸ªåšå®¢ğŸ˜‹">
  
    <link rel="alternate" href="/atom.xml" title="è½¦è½®äº’è”" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">è½¦è½®äº’è”</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">æœ‰è½¦å°±æœ‰è½¦è½®</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2017-12-28" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/28/2017-12-28/" class="article-date">
  <time datetime="2017-12-28T16:04:29.000Z" itemprop="datePublished">2017-12-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/28/2017-12-28/">ç¬¬7æœŸåšå®¢ï¼ˆæŸ¥è¿ç« æ—¥å¿—ç³»ç»Ÿçš„æ¥å…¥NSLoggerï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="æŸ¥è¿ç« æ—¥å¿—ç³»ç»Ÿçš„æ¥å…¥NSLogger"><a href="#æŸ¥è¿ç« æ—¥å¿—ç³»ç»Ÿçš„æ¥å…¥NSLogger" class="headerlink" title="æŸ¥è¿ç« æ—¥å¿—ç³»ç»Ÿçš„æ¥å…¥NSLogger"></a>æŸ¥è¿ç« æ—¥å¿—ç³»ç»Ÿçš„æ¥å…¥NSLogger</h1><p>NSLoggeræ˜¯ä¸€æ¬¾å¼ºåŠ›çš„æ—¥å¿—è®°å½•å’Œåˆ†æå·¥å…·ï¼Œå…¶å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥å®Œå…¨æ›¿ä»£Xcodeè‡ªå¸¦çš„Debuggerï¼Œæœ¬æ–‡å°†ä»‹ç»ä¸€äº›å…¶ä¸»è¦ç‰¹ç‚¹å’Œç”¨æ³•ä»¥åŠæ¥å…¥æŸ¥è¿ç« çš„æ€è·¯ã€‚<a href="https://github.com/fpillet/NSLogger" target="_blank" rel="external">githubåœ°å€</a>.</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ul>
<li>Step 1. åœ¨Macä¸Šä¸‹è½½å¹¶å®‰è£…<a href="https://github.com/fpillet/NSLogger/releases" target="_blank" rel="external">NSLogger desktop viewer</a>.</li>
<li>Step 2. å°†NSLogger frameworkæ·»åŠ åˆ°å·¥ç¨‹ä¸­.</li>
<li>Step 3. There is no step 3â€¦</li>
</ul>
<h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="Resources/ç»Ÿè®¡äº‹ä»¶log.png" alt=""><br><img src="Resources/adLog.png" alt=""><br><img src="Resources/networkLog.png" alt=""></p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>NSLoggeræ”¯æŒTCPå’ŒBonjourä¸¤ç§æ–¹å¼è¿æ¥ç»ˆç«¯è®¾å¤‡ï¼ŒBonjourè¿æ¥ä¸€èˆ¬ä¸éœ€è¦é…ç½®ï¼Œå¦‚æœè¦æ˜¯ä½¿ç”¨TCPè¿æ¥ï¼Œè¦é€šè¿‡LoggerSetViewerHost()é…ç½®IPåœ°å€å’Œç«¯å£ï¼ˆåŒæ—¶éœ€é…ç½®NSLoggerViewerï¼Œåœ¨Preferencesçš„Networkä¸­ï¼Œå‹¾é€‰ â€œListen for loggers on TCP portâ€æ‰“å¼€ç›‘å¬ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LoggerSetViewerHost(NULL, (__bridge CFStringRef)@&quot;192.168.11.38&quot;, (UInt32)50000);</div></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#import &quot;NSLogger.h&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">#ifdef DEBUG</div><div class="line">    #define NSLog(...)                      LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;NSLog&quot;, 0, __VA_ARGS__)</div><div class="line">    #define LoggerError(level, ...)         LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Error&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerApp(level, ...)           LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;App&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerView(level, ...)          LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;View&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerService(level, ...)       LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Service&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerModel(level, ...)         LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Model&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerData(level, ...)          LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Data&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerNetwork(level, ...)       LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Network&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerLocation(level, ...)      LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Location&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerPush(level, ...)          LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Push&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerFile(level, ...)          LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;File&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerSharing(level, ...)       LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Sharing&quot;, level, __VA_ARGS__)</div><div class="line">    #define LoggerAd(level, ...)            LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Ad and Stat&quot;, level, __VA_ARGS__)</div><div class="line"></div><div class="line">#else</div><div class="line">    #define NSLog(...)                      LogMessageCompat(__VA_ARGS__)</div><div class="line">    #define LoggerError(...)                while(0) &#123;&#125;</div><div class="line">    #define LoggerApp(level, ...)           while(0) &#123;&#125;</div><div class="line">    #define LoggerView(...)                 while(0) &#123;&#125;</div><div class="line">    #define LoggerService(...)              while(0) &#123;&#125;</div><div class="line">    #define LoggerModel(...)                while(0) &#123;&#125;</div><div class="line">    #define LoggerData(...)                 while(0) &#123;&#125;</div><div class="line">    #define LoggerNetwork(...)              while(0) &#123;&#125;</div><div class="line">    #define LoggerLocation(...)             while(0) &#123;&#125;</div><div class="line">    #define LoggerPush(...)                 while(0) &#123;&#125;</div><div class="line">    #define LoggerFile(...)                 while(0) &#123;&#125;</div><div class="line">    #define LoggerSharing(...)              while(0) &#123;&#125;</div><div class="line">    #define LoggerAd(...)                   while(0) &#123;&#125;</div><div class="line"></div><div class="line">#endif</div></pre></td></tr></table></figure>
<p>##ç‰¹ç‚¹</p>
<ul>
<li>æ ‡ç­¾è¾“å‡º</li>
<li>è‡ªå®šä¹‰ä¼˜å…ˆçº§</li>
<li>ç›´æ¥è¾“å‡ºå›¾ç‰‡</li>
<li>å¤šçº¿ç¨‹æ ‡è®°</li>
<li>æ—¶åºæ§åˆ¶</li>
<li>è¿œç¨‹è®°å½•</li>
</ul>
<p>##æŸ¥è¿ç« æ˜¯å¦‚ä½•æ¥å…¥çš„</p>
<p>1.è¯¥æ—¥å¿—ç›´æ¥æ¥å…¥å·²æœ‰çš„BPLoggerä¸­ï¼Œå¯¹æ¯”NSLogger.hä¸­æä¾›çš„å®å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ç¬¦åˆæˆ‘ä»¬é¡¹ç›®çš„å®å®šä¹‰ï¼Œå¯¹äºReleaseä¸‹ä¸è¾“å‡ºæ—¥å¿—ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#ifdef DEBUG</div><div class="line"></div><div class="line">#define BPLog(...)                      LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Normol Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerNetwork(...)            LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;NetWork Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerAd(...)                 LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;AD Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerEvent(...)              LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Event Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCache(...)              LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Cache Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerSkipping(...)           LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Skipping Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCWZSDK(...)             LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Cwzsdk Dispatch Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCustom(CustomStr,...)   LogMessageF(__FILE__, __LINE__, __FUNCTION__, CustomStr, 0, __VA_ARGS__)</div><div class="line"></div><div class="line">#else</div><div class="line"></div><div class="line">#define BPLog(...)                      while(0) &#123;&#125;</div><div class="line">#define BPLoggerNetwork(...)            while(0) &#123;&#125;</div><div class="line">#define BPLoggerAd(level, ...)          while(0) &#123;&#125;</div><div class="line">#define BPLoggerEvent(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerCache(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerSkipping(...)           while(0) &#123;&#125;</div><div class="line">#define BPLoggerCWZSDK(...)             while(0) &#123;&#125;</div><div class="line">#define BPLoggerCustom(CustomStr,...)   while(0) &#123;&#125;</div><div class="line"></div><div class="line">#endif</div></pre></td></tr></table></figure>
<p>2.ç”±äºæ—¥å¿—ç³»ç»Ÿå¯èƒ½ä¼šåµŒå…¥æŸ¥è¿ç« çš„ä¸»å·¥ç¨‹å’Œå¾ˆå¤šåŸºç¡€åº“ä¸­ï¼Œæ¯”å¦‚CLAdsSDKï¼ŒCLSafeKitï¼ŒBPCommonç­‰ï¼Œæ­£å¸¸çš„ä½¿ç”¨å°±æ˜¯åœ¨æœ€åŸºç¡€åº“ä¸­ä¾èµ–NSLoggerï¼Œä½†æ˜¯è¿™æ ·ä¼šä½¿é¡¹ç›®å¯¹è¯¥å·¥å…·çš„ä½¿ç”¨å’Œå‰¥ç¦»å¢åŠ æ›´å¤šçš„äººä¸ºæ“ä½œï¼Œè¿™å¹¶ä¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ³•ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯æ‰€æœ‰çš„åŸºç¡€åº“éƒ½ä¸ä¾èµ–NSLoggerï¼Œå¦‚æœéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨ä¸»å·¥ç¨‹çš„podfileä¸­pod â€˜NSLoggerâ€™å°±è¡Œï¼Œå°±åƒä¸€ä¸ªâ€æ’ä»¶â€é‚£æ ·ï¼Œå¯ä»¥éšæ„åŠ å…¥å·¥ç¨‹ï¼Œä¹Ÿå¯ä»¥éšæ—¶æ‹¿èµ°ï¼Œæ‰€ä»¥å¯¹BPLogger.hè¿›è¡Œæ”¹é€ ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">#if MainProjectMarco(ä¸€ä¸ªåœ¨ä¸»å·¥ç¨‹çš„å®å®šä¹‰)</div><div class="line">#import &quot;LoggerClient.h&quot;</div><div class="line">#endif</div><div class="line"></div><div class="line">#if MainProjectMarco(ä¸€ä¸ªåœ¨ä¸»å·¥ç¨‹çš„å®å®šä¹‰)</div><div class="line"></div><div class="line">#ifdef DEBUG</div><div class="line"></div><div class="line">#define BPLog(...)                      LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Normol Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerNetwork(...)            LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;NetWork Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerAd(...)                 LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;AD Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerEvent(...)              LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Event Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCache(...)              LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Cache Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerSkipping(...)           LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Skipping Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCWZSDK(...)             LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Cwzsdk Dispatch Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCustom(CustomStr,...)   LogMessageF(__FILE__, __LINE__, __FUNCTION__, CustomStr, 0, __VA_ARGS__)</div><div class="line"></div><div class="line">#else</div><div class="line"></div><div class="line">#define BPLog(...)                      while(0) &#123;&#125;</div><div class="line">#define BPLoggerNetwork(...)            while(0) &#123;&#125;</div><div class="line">#define BPLoggerAd(level, ...)          while(0) &#123;&#125;</div><div class="line">#define BPLoggerEvent(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerCache(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerSkipping(...)           while(0) &#123;&#125;</div><div class="line">#define BPLoggerCWZSDK(...)             while(0) &#123;&#125;</div><div class="line">#define BPLoggerCustom(CustomStr,...)   while(0) &#123;&#125;</div><div class="line"></div><div class="line">#endif</div><div class="line"></div><div class="line">#else</div><div class="line"></div><div class="line">#ifdef DEBUG</div><div class="line">#define BPLog(...)                      NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerNetwork(...)            NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerAd(...)                 NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerEvent(...)              NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerCache(...)              NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerSkipping(...)           NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerCWZSDK(...)             NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerCustom(CustomStr,...)   NSLog(__VA_ARGS__)</div><div class="line"></div><div class="line">#else</div><div class="line"></div><div class="line">#define BPLog(...)                      while(0) &#123;&#125;</div><div class="line">#define BPLoggerNetwork(...)            while(0) &#123;&#125;</div><div class="line">#define BPLoggerAd(level, ...)          while(0) &#123;&#125;</div><div class="line">#define BPLoggerEvent(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerCache(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerSkipping(...)           while(0) &#123;&#125;</div><div class="line">#define BPLoggerCWZSDK(...)             while(0) &#123;&#125;</div><div class="line">#define BPLoggerCustom(CustomStr,...)   while(0) &#123;&#125;</div><div class="line"></div><div class="line">#endif</div><div class="line"></div><div class="line">#endif</div></pre></td></tr></table></figure>
<p>3.å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¾èµ–ä¸»å·¥ç¨‹éœ€è¦æä¾›çš„å®å®šä¹‰ï¼Œç¦»â€æ’ä»¶â€çš„å®šä¹‰è¿˜å·®æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•æŠŠè¿™ä¸ªå®å®šä¹‰ä¹Ÿå»æ‰ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">#import &lt;CoreGraphics/CoreGraphics.h&gt;</div><div class="line"></div><div class="line">#if __has_include(&lt;NSLogger/LoggerClient.h&gt;)</div><div class="line">#import &quot;LoggerClient.h&quot;</div><div class="line">#endif</div><div class="line"></div><div class="line">#if __has_include(&lt;NSLogger/LoggerClient.h&gt;)</div><div class="line"></div><div class="line">#ifdef DEBUG</div><div class="line"></div><div class="line">#define BPLog(...)                      LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Normol Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerNetwork(...)            LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;NetWork Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerAd(...)                 LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;AD Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerEvent(...)              LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Event Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCache(...)              LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Cache Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerSkipping(...)           LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Skipping Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCWZSDK(...)             LogMessageF(__FILE__, __LINE__, __FUNCTION__, @&quot;Cwzsdk Dispatch Log&quot;, 0, __VA_ARGS__)</div><div class="line">#define BPLoggerCustom(CustomStr,...)   LogMessageF(__FILE__, __LINE__, __FUNCTION__, CustomStr, 0, __VA_ARGS__)</div><div class="line"></div><div class="line">#else</div><div class="line"></div><div class="line">#define BPLog(...)                      while(0) &#123;&#125;</div><div class="line">#define BPLoggerNetwork(...)            while(0) &#123;&#125;</div><div class="line">#define BPLoggerAd(level, ...)          while(0) &#123;&#125;</div><div class="line">#define BPLoggerEvent(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerCache(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerSkipping(...)           while(0) &#123;&#125;</div><div class="line">#define BPLoggerCWZSDK(...)             while(0) &#123;&#125;</div><div class="line">#define BPLoggerCustom(CustomStr,...)   while(0) &#123;&#125;</div><div class="line"></div><div class="line">#endif</div><div class="line"></div><div class="line">#else</div><div class="line"></div><div class="line">#ifdef DEBUG</div><div class="line">#define BPLog(...)                      NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerNetwork(...)            NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerAd(...)                 NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerEvent(...)              NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerCache(...)              NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerSkipping(...)           NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerCWZSDK(...)             NSLog(__VA_ARGS__)</div><div class="line">#define BPLoggerCustom(CustomStr,...)   NSLog(__VA_ARGS__)</div><div class="line"></div><div class="line">#else</div><div class="line"></div><div class="line">#define BPLog(...)                      while(0) &#123;&#125;</div><div class="line">#define BPLoggerNetwork(...)            while(0) &#123;&#125;</div><div class="line">#define BPLoggerAd(level, ...)          while(0) &#123;&#125;</div><div class="line">#define BPLoggerEvent(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerCache(...)              while(0) &#123;&#125;</div><div class="line">#define BPLoggerSkipping(...)           while(0) &#123;&#125;</div><div class="line">#define BPLoggerCWZSDK(...)             while(0) &#123;&#125;</div><div class="line">#define BPLoggerCustom(CustomStr,...)   while(0) &#123;&#125;</div><div class="line"></div><div class="line">#endif</div><div class="line"></div><div class="line">#endif</div></pre></td></tr></table></figure>
<p>è¿™é‡Œé¢æœ‰ä¸ªå…³é”®çš„å®å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#if __has_include()</div></pre></td></tr></table></figure>
<p>æ­¤å®ä¼ å…¥ä¸€ä¸ªä½ æƒ³å¼•å…¥æ–‡ä»¶çš„åç§°ä½œä¸ºå‚æ•°ï¼Œå¦‚æœè¯¥æ–‡ä»¶èƒ½å¤Ÿè¢«å¼•å…¥åˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çš„æ‰€æœ‰åŸºç¡€åº“éƒ½ä¸ä¾èµ–NSLoggerï¼Œåªè¦ä¸»å·¥ç¨‹podfileä¸­æœ‰NSLoggerï¼Œé‚£ä¹ˆè¿™ä¸ªå·¥å…·å°±èƒ½å·¥ä½œï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æ˜¯æ™®é€šçš„NSLog</p>
<h2 id="åŸºäºä¸Šé¢æ¥å…¥æŸ¥è¿ç« çš„è¿‡ç¨‹ï¼Œ-if-has-include-è¿™ä¸ªæ–¹å¼æ˜¯å¦å¯ä»¥è¿›è¡Œå»¶å±•ä½¿ç”¨"><a href="#åŸºäºä¸Šé¢æ¥å…¥æŸ¥è¿ç« çš„è¿‡ç¨‹ï¼Œ-if-has-include-è¿™ä¸ªæ–¹å¼æ˜¯å¦å¯ä»¥è¿›è¡Œå»¶å±•ä½¿ç”¨" class="headerlink" title="åŸºäºä¸Šé¢æ¥å…¥æŸ¥è¿ç« çš„è¿‡ç¨‹ï¼Œ#if __has_include()è¿™ä¸ªæ–¹å¼æ˜¯å¦å¯ä»¥è¿›è¡Œå»¶å±•ä½¿ç”¨"></a>åŸºäºä¸Šé¢æ¥å…¥æŸ¥è¿ç« çš„è¿‡ç¨‹ï¼Œ#if __has_include()è¿™ä¸ªæ–¹å¼æ˜¯å¦å¯ä»¥è¿›è¡Œå»¶å±•ä½¿ç”¨</h2><p>æ¯”å¦‚CLSafeKit/Logæ˜¯ä¸æ˜¯å¯ä»¥ä»¥â€æ’ä»¶â€çš„å½¢å¼æ¥å…¥æŸ¥è¿ç« ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¾èµ–åœ¨BPCommonä¸­ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/28/2017-12-28/" data-id="cjbqj4ept000cn462bz3u4ijz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NSLogger/">NSLogger</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2017-12-22" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/22/2017-12-22/" class="article-date">
  <time datetime="2017-12-22T16:04:29.000Z" itemprop="datePublished">2017-12-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/22/2017-12-22/">ç¬¬6æœŸåšå®¢ï¼ˆå“åº”é“¾ï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="iOSå“åº”é“¾ä¸­HitTestã€nextReponderçš„ä»‹ç»"><a href="#iOSå“åº”é“¾ä¸­HitTestã€nextReponderçš„ä»‹ç»" class="headerlink" title="iOSå“åº”é“¾ä¸­HitTestã€nextReponderçš„ä»‹ç»"></a>iOSå“åº”é“¾ä¸­HitTestã€nextReponderçš„ä»‹ç»</h1><blockquote>
<p>iOSçš„UIEventäº‹ä»¶æœ‰å¥½å‡ ç§ï¼šTouch Events(è§¦æ‘¸äº‹ä»¶)ã€Motion Events(è¿åŠ¨äº‹ä»¶)ã€Remote Events(è¿œç¨‹äº‹ä»¶)ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„åº”è¯¥å°±æ˜¯Touch Eventsäº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸»è¦å°±è®²å®ƒï¼Œæ ¸å¿ƒå°±æ˜¯åˆ°<code>UIView</code>çš„<br><code>func hitTest(_ point: CGPoint, with event: UIEvent?) -&gt; UIView?</code><br>ä»¥åŠnextReponderä¸¤ä¸ª</p>
</blockquote>
<p><strong>æ¯”å¦‚æˆæœï¼šé­”å›¾&amp;å›¾ç‰‡æµè§ˆ å¤æ‚çš„è§†å›¾å±‚çº§æ‹†åˆ†</strong></p>
<p><img src="https://user-images.githubusercontent.com/9360037/34282300-3e5aab32-e6ff-11e7-87f3-4b9f4a1d5692.png" alt="wechatimg166"><br><img src="https://user-images.githubusercontent.com/9360037/34268452-b59c6ae4-e6bb-11e7-974e-63411e9f87b3.png" alt="pb"></p>
<p><strong>è€ƒä¸€è€ƒ:</strong> ç›´æ¥ç»§æ‰¿äºUIResponderçš„ç±»æœ‰å“ªäº›ï¼Ÿ</p>
<h2 id="UIResponder-å“åº”é“¾-ï¼Ÿï¼Ÿ"><a href="#UIResponder-å“åº”é“¾-ï¼Ÿï¼Ÿ" class="headerlink" title="UIResponder ?? å“åº”é“¾ ï¼Ÿï¼Ÿ"></a>UIResponder ?? å“åº”é“¾ ï¼Ÿï¼Ÿ</h2><ul>
<li>å“åº”é“¾æ˜¯ä»€ä¹ˆæ—¶å€™æ€æ ·æ„å»ºçš„ï¼Ÿ</li>
<li>äº‹ä»¶ç¬¬ä¸€ä¸ªå“åº”è€…æ˜¯æ€ä¹ˆç¡®å®šçš„ï¼Ÿ</li>
<li>äº‹ä»¶ç¬¬ä¸€ä¸ªå“åº”è€…ç¡®å®šåï¼Œç³»ç»Ÿæ˜¯æ€æ ·ä¼ é€’äº‹ä»¶çš„ï¼Ÿ</li>
</ul>
<h3 id="å“åº”é“¾çš„æ„å»º"><a href="#å“åº”é“¾çš„æ„å»º" class="headerlink" title="å“åº”é“¾çš„æ„å»º"></a>å“åº”é“¾çš„æ„å»º</h3><p>å…ˆçœ‹çœ‹UIResponderç±»</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">open <span class="keyword">var</span> next: <span class="type">UIResponder</span>? &#123; <span class="keyword">get</span> &#125;</div><div class="line">open <span class="keyword">var</span> canBecomeFirstResponder: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125; <span class="comment">// default is NO    </span></div><div class="line"><span class="comment">// default is NO</span></div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">becomeFirstResponder</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span></div><div class="line">open <span class="keyword">var</span> canResignFirstResponder: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125; <span class="comment">// default is YES    </span></div><div class="line"><span class="comment">// default is YES</span></div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">resignFirstResponder</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span></div><div class="line">open <span class="keyword">var</span> isFirstResponder: <span class="type">Bool</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line"></div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">touchesBegan</span><span class="params">(<span class="number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span></div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">touchesMoved</span><span class="params">(<span class="number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span></div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">touchesEnded</span><span class="params">(<span class="number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span></div><div class="line">open <span class="function"><span class="keyword">func</span> <span class="title">touchesCancelled</span><span class="params">(<span class="number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span></div></pre></td></tr></table></figure>
<p>å¸¸è§çš„è§¦æ‘¸å“åº”é“¾æ„å»º</p>
<blockquote>
<ol>
<li>addSubview</li>
<li>ViewController åˆå§‹åŒ–</li>
</ol>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/9360037/34268459-b9c32874-e6bb-11e7-8227-ae124123a837.png" alt="res"></p>
<h4 id="äº‹ä»¶å“åº”è¿‡ç¨‹"><a href="#äº‹ä»¶å“åº”è¿‡ç¨‹" class="headerlink" title="äº‹ä»¶å“åº”è¿‡ç¨‹"></a>äº‹ä»¶å“åº”è¿‡ç¨‹</h4><ul>
<li>è§¦æ‘¸å¼€å§‹</li>
<li>äº‹ä»¶å…¥æ ˆ</li>
<li>runloopå“åº”</li>
<li>uiapplication äº‹ä»¶ä¼ é€’ç»™ windows</li>
<li>hitTest æ‰¾åˆ° view (<a href="https://lists.apple.com/archives/cocoa-dev/2014/Feb/msg00118.html" target="_blank" rel="external">hitTestä¼šè¢«è°ƒç”¨ä¸¤æ¬¡,ä¸ºä»€ä¹ˆï¼Œä¸çŸ¥é“ï¼Ÿ</a>)</li>
<li>hitView å“åº” touchEvent</li>
</ul>
<p><strong>æ ¸å¿ƒçš„æ–¹æ³•</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">hitTest</span><span class="params">(<span class="number">_</span> point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">UIView</span>?</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">point</span><span class="params">(inside point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">Bool</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šhittest &amp; pointinsideæ˜¯uiviewçš„å®ä¾‹æ–¹æ³•</p>
</blockquote>
<p>æ¯”å¦‚tableviewçš„cellç‚¹å‡»,hitTestå¯»æ‰¾å“åº”cellçš„è¿‡ç¨‹</p>
<ul>
<li>windows</li>
<li>windows.rootController (navController).view</li>
<li>navController.rootControler (vc).view</li>
<li>tableview</li>
<li>some cell</li>
<li>contentView</li>
</ul>
<blockquote>
<p>Note: æŸ¥è¯¢è¿‡ç¨‹ä¹Ÿä¸æ˜¯è¿™ä¹ˆé¡ºåˆ©çš„ï¼Œæœ‰å¼¯è·¯ï¼Œä¹Ÿæœ‰å±æ€§é™åˆ¶</p>
</blockquote>
<ul>
<li>hittestæ‰“ç®—ä»åå¾€å‰éå†subviews,ç›´åˆ°æ‰¾åˆ°æ‰åœæ­¢éå†</li>
<li>subviewå¿…é¡»ç¬¦åˆ<ul>
<li>pointInside return YES</li>
<li>å±æ€§é™åˆ¶æœ‰<ul>
<li>alpha &gt; 0.01</li>
<li>hidden == NO</li>
<li>userInteractionEnabled == YES</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¨¡æ‹ŸåŸç”Ÿæœªå¹²é¢„ä¸‹çš„ä»£ç </span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">hitTest</span><span class="params">(<span class="number">_</span> point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">UIView</span>? &#123;</div><div class="line">	<span class="keyword">if</span> !isUserInteractionEnabled || isHidden || alpha&lt;=<span class="number">0.01</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</div><div class="line">	<span class="keyword">if</span> !<span class="keyword">self</span>.point(inside: point, with: event) &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</div><div class="line">	<span class="keyword">for</span> subview <span class="keyword">in</span> subviews.reversed() &#123;</div><div class="line">		<span class="keyword">let</span> convertPoint = subview.convert(point, from: <span class="keyword">self</span>)</div><div class="line">		<span class="keyword">let</span> subHitTestView = subview.hitTest(convertPoint, with: event)</div><div class="line">		<span class="keyword">if</span> <span class="keyword">let</span> hitTestView = subHitTestView &#123; <span class="keyword">return</span> hitTestView &#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">self</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="é‚£æˆ‘ä»¬å¹²é¢„åï¼ŒHitTestçš„å®æˆ˜åº”ç”¨å°±æœ‰"><a href="#é‚£æˆ‘ä»¬å¹²é¢„åï¼ŒHitTestçš„å®æˆ˜åº”ç”¨å°±æœ‰" class="headerlink" title="é‚£æˆ‘ä»¬å¹²é¢„åï¼ŒHitTestçš„å®æˆ˜åº”ç”¨å°±æœ‰"></a>é‚£æˆ‘ä»¬å¹²é¢„åï¼ŒHitTestçš„å®æˆ˜åº”ç”¨å°±æœ‰</h4><ul>
<li>å¤æ‚çš„è§†å›¾å±‚çº§çš„æ‹†åˆ†</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">hitTest</span><span class="params">(<span class="number">_</span> point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">UIView</span>? &#123;</div><div class="line">	<span class="keyword">let</span> view = <span class="keyword">super</span>.hitTest(point, with: event)</div><div class="line">	<span class="keyword">return</span> view == <span class="keyword">self</span> ? <span class="literal">nil</span> : view</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è‡ªå®šä¹‰Touchäº‹ä»¶ä¼ é€’å¯¹è±¡</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">hitTest</span><span class="params">(<span class="number">_</span> point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">UIView</span>? &#123;</div><div class="line">	<span class="keyword">let</span> view = <span class="keyword">super</span>.hitTest(point, with: event)</div><div class="line">	<span class="keyword">return</span> view == someBtn ? anotherBtn : view</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è‡ªå®šä¹‰æ§ä»¶çš„å“åº”åŒºåŸŸåŠå“åº”å±‚çº§</li>
</ul>
<blockquote>
<p>viewä¿®æ”¹å“åº”åŒºåŸŸæ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§å¦‚ä¸‹ï¼Œå®ƒçš„superviewæ¥hitTestï¼Œç¬¬äºŒç§è‡ªå·±hitTest</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">hitTest</span><span class="params">(<span class="number">_</span> point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">UIView</span>? &#123;</div><div class="line">	<span class="keyword">if</span> someBtn.frame.insetBy(dx: -<span class="number">10</span>, dy: -<span class="number">10</span>).<span class="built_in">contains</span>(point) &#123;</div><div class="line">		<span class="keyword">return</span> someBtn</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">super</span>.point(inside: point, with: event)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å“åº”é“¾-nextResponder"><a href="#å“åº”é“¾-nextResponder" class="headerlink" title="å“åº”é“¾ .nextResponder"></a>å“åº”é“¾ .nextResponder</h2><blockquote>
<p>å’Œ hitTestè‡ªåº•å‘ä¸Šç›¸åï¼Œå®ƒæ˜¯ä»æœ€æœ«ç«¯çš„responderå‘ä¸‹ä¼ é€’ï¼ŒhitTestè‡ªä¸‹è€Œä¸ŠæŸ¥æ‰¾å“åº”çš„viewï¼ŒnextResponderæ˜¯åŸºäºhitTeståŸºç¡€ä¸Šï¼Œè‡ªä¸Šè€Œä¸‹å¯»æ‰¾eventçš„å“åº”è€…</p>
</blockquote>
<p>å¸¸è§çš„åº”ç”¨æ¡ˆä¾‹ï¼šBPUIResponderAdditionsä¸­çš„æ–¹æ³•ï¼Œå¯ä»¥æŸ¥æ‰¾viewçš„Controlleræˆ–navigationController</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">nullable</span> __kindof <span class="built_in">UIResponder</span> *)findNextResonderInClass:(<span class="keyword">nonnull</span> Class)responderClass</div><div class="line">&#123;</div><div class="line">	<span class="built_in">UIResponder</span> *next = <span class="keyword">self</span>;</div><div class="line">	<span class="keyword">do</span> &#123;</div><div class="line">		next = [next nextResponder];</div><div class="line">		<span class="keyword">if</span> ([next isKindOfClass:responderClass]) &#123;</div><div class="line">		<span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// next ä¸ä¸ºç©º ä¸” ä¸æ˜¯è¾¾åˆ°æœ€åº•å±‚çš„ appdelegate</span></div><div class="line">	&#125; <span class="keyword">while</span> (next!=<span class="literal">nil</span> &amp;&amp; ![next conformsToProtocol:<span class="class"><span class="keyword">@protocol</span>(<span class="title">UIApplicationDelegate</span>)]);</span></div><div class="line">	<span class="keyword">return</span> next;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æŸ¥è¯¢å“åº”æœ€è¿‘çš„ controller</span></div><div class="line"><span class="built_in">UIViewController</span> *vc = [view findNextResonderInClass:[<span class="built_in">UIViewController</span> <span class="keyword">class</span>]];</div></pre></td></tr></table></figure>
<h4 id="çŸ¥è¯†ç‚¹ï¼š"><a href="#çŸ¥è¯†ç‚¹ï¼š" class="headerlink" title="çŸ¥è¯†ç‚¹ï¼š"></a>çŸ¥è¯†ç‚¹ï¼š</h4><ul>
<li><strong>å“åº”é“¾äº‹ä»¶ä¼ é€’</strong></li>
</ul>
<blockquote>
<p>é€šè¿‡nextResponderå‘ä¸‹ä¼ é€’event</p>
</blockquote>
<p>æ¼”ç¤º</p>
<blockquote>
<p>touchesBegan / super.touchesBegan æˆ– nextResponder.touchesBegan ä¸€ç›´è°ƒç”¨ä¸‹å»</p>
</blockquote>
<ul>
<li><strong>ç¬¬ä¸€å“åº”è€…</strong><blockquote>
<p>æœ‰æ‹¦è…°æˆªæ–­çš„æ„æ€ï¼ŒåŸæœ‰çš„é¡¶éƒ¨ç¬¬ä¸€å“åº”è€…è¢«ä¿®æ”¹ï¼Œå“åº”é“¾ä¸­æ¥æ”¶äº‹ä»¶ç¬¬ä¸€äººï¼ˆå¸¸è§textFieldï¼ŒwebViewåŠUImenuControllerï¼Œè§demoï¼‰</p>
</blockquote>
</li>
</ul>
<p>æ¼”ç¤º</p>
<blockquote>
<ul>
<li>Button event å…ˆä¸‹ä¼ é€’</li>
<li>becomeFirstResponderåï¼ŒnextResponderæ— äº‹ä»¶ä¸‹ä¼ </li>
<li>canBecomeFirstResponder \ becomeFirstResponder æ‹¦æˆª</li>
</ul>
</blockquote>
<ul>
<li><strong>cancelsTouchesInView</strong></li>
</ul>
<blockquote>
<p>ç³»ç»Ÿä¼šå°†Touch cancelæ¶ˆæ¯å‘é€ç»™hitTestView ï¼Œå¹¶è°ƒç”¨hitTestViewçš„TouchCancel</p>
</blockquote>
<p>æ¼”ç¤º</p>
<blockquote>
<p>demo:buttonçš„touchUpInsideå¯¹UIPanGestureRecognizerçš„å½±å“</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/22/2017-12-22/" data-id="cjbqj4epr000an4620hckxye5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hitTest/">hitTest</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nextResponder/">nextResponder</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/responder-chain/">responder chain</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2017-11-27" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/27/2017-11-27/" class="article-date">
  <time datetime="2017-11-27T16:04:29.000Z" itemprop="datePublished">2017-11-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/27/2017-11-27/">ç¬¬ä¸‰æœŸåšå®¢ï¼ˆSafeKitï¼Œæ··æ·†ï¼Œm34ï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="CATransform3D-çš„-m34-å±æ€§"><a href="#CATransform3D-çš„-m34-å±æ€§" class="headerlink" title="CATransform3D çš„ m34 å±æ€§"></a>CATransform3D çš„ m34 å±æ€§</h2><blockquote>
<p><code>m34</code>çš„é»˜è®¤å€¼æ˜¯0ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®<code>m34</code>ä¸º<code>-1.0 / d</code>æ¥åº”ç”¨é€è§†æ•ˆæœï¼Œdä»£è¡¨äº†æƒ³è±¡ä¸­è§†è§’ç›¸æœºå’Œå±å¹•ä¹‹é—´çš„è·ç¦»ï¼Œä»¥åƒç´ ä¸ºå•ä½</p>
</blockquote>
<p><img src="https://github.com/AttackOnDobby/iOS-Core-Animation-Advanced-Techniques/raw/1767d1ee17e8d99f544603974ddc673fe6c0997e/5-å˜æ¢/5.9.jpeg" alt=""></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;QuartzCore/QuartzCore.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#define WIDTH 10</span></div><div class="line"><span class="meta">#define HEIGHT 10</span></div><div class="line"><span class="meta">#define DEPTH 10</span></div><div class="line"><span class="meta">#define SIZE 100</span></div><div class="line"><span class="meta">#define SPACING 150</span></div><div class="line"><span class="meta">#define CAMERA_DISTANCE 500</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></div><div class="line">ï¿¼</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="keyword">IBOutlet</span> <span class="built_in">UIScrollView</span> *scrollView;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line"></div><div class="line">    <span class="keyword">self</span>.scrollView.contentSize = <span class="built_in">CGSizeMake</span>((WIDTH - <span class="number">1</span>)*SPACING, (HEIGHT - <span class="number">1</span>)*SPACING);</div><div class="line"></div><div class="line">    <span class="built_in">CATransform3D</span> transform = <span class="built_in">CATransform3DIdentity</span>;</div><div class="line">    transform.m34 = <span class="number">-1.0</span> / <span class="built_in">CAMERA_DISTANCE</span>;</div><div class="line">    <span class="keyword">self</span>.scrollView.layer.sublayerTransform = transform;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> z = DEPTH - <span class="number">1</span>; z &gt;= <span class="number">0</span>; z--) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; HEIGHT; y++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; WIDTH; x++) &#123;</div><div class="line">                <span class="comment">//create layer</span></div><div class="line">                <span class="built_in">CALayer</span> *layer = [<span class="built_in">CALayer</span> layer];</div><div class="line">                layer.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, SIZE, SIZE);</div><div class="line">                layer.position = <span class="built_in">CGPointMake</span>(x*SPACING, y*SPACING);</div><div class="line">                layer.zPosition = -z*SPACING;</div><div class="line">                <span class="comment">//set background color</span></div><div class="line">                layer.backgroundColor = [<span class="built_in">UIColor</span> colorWithWhite:<span class="number">1</span>-z*(<span class="number">1.0</span>/DEPTH) alpha:<span class="number">1</span>].CGColor;</div><div class="line">                <span class="comment">//attach to scroll view</span></div><div class="line">                [<span class="keyword">self</span>.scrollView.layer addSublayer:layer];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p><strong>m34çš„è¿ç”¨ä¾‹å­: XYDebugView</strong></p>
<p><a href="https://github.com/ZhipingYang/XYDebugView" target="_blank" rel="external">è¯¦æƒ…æŸ¥çœ‹</a></p>
<h2 id="SafeKit-åŠå…¶ä»–-by-Joliy"><a href="#SafeKit-åŠå…¶ä»–-by-Joliy" class="headerlink" title="SafeKit åŠå…¶ä»– by Joliy"></a>SafeKit åŠå…¶ä»– by Joliy</h2><p>CLSafeKit å…·ä½“è§:<a href="http://gitlab.chelun.com/ios_plugin/CLSafeKit/blob/master/README.md" target="_blank" rel="external">README.md</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/27/2017-11-27/" data-id="cjbqj4epm0004n462ear6qo5b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SafeKit/">SafeKit</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/m34/">m34</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ··æ·†/">æ··æ·†</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2017-12-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/27/2017-12-01/" class="article-date">
  <time datetime="2017-11-27T16:04:29.000Z" itemprop="datePublished">2017-11-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/27/2017-12-01/">ç¬¬4æœŸåšå®¢ï¼ˆæ··ç¼–å°è¯•ï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="http://swift.gg/2016/03/17/should-you-still-learn-objective-c/" target="_blank" rel="external">ä½ æ˜¯å¦ä¾ç„¶åº”è¯¥å­¦ä¹  Objective-C å‘¢ï¼Ÿ</a></li>
<li><a href="http://blog.csdn.net/clovejq/article/details/71107796?utm_source=itdadao&amp;utm_medium=referral" target="_blank" rel="external">iOS åŠ¨æ€åº“å’Œé™æ€åº“çš„çš„åŒºåˆ« åŠ¨æ€åº“çš„éš”ç¦»ä¸é™æ€åº“çš„å¸é™„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•</a></li>
<li><a href="http://blog.csdn.net/u012390519/article/details/78017999" target="_blank" rel="external">Cocoapodsåˆ¶ä½œpodæ—¶ï¼Œä¾èµ–ç™¾åº¦åœ°å›¾SDKçš„ä¸€äº›é—®é¢˜</a></li>
<li><a href="http://www.jianshu.com/p/a1d2d148fdd3" target="_blank" rel="external">è®©CocoaPods static libraryæ”¯æŒModule</a> <code>Allow Non-modular includes in Framework Modules</code>å¼€å…³çš„é—®é¢˜</li>
<li><a href="http://www.jianshu.com/p/307427e6d990" target="_blank" rel="external">swiftä¸­ä½¿ç”¨MARK,TODO,FIXME</a> <code>ä»£ç åˆ†ç±»ï¼Œåˆ†å‰²çº¿æ ‡è¯†</code></li>
</ul>
<h2 id="ç½‘ç»œåº“çš„è½¬æ¢å†…å®¹ï¼Œéœ€è¦æ³¨æ„çš„äº‹é¡¹"><a href="#ç½‘ç»œåº“çš„è½¬æ¢å†…å®¹ï¼Œéœ€è¦æ³¨æ„çš„äº‹é¡¹" class="headerlink" title="ç½‘ç»œåº“çš„è½¬æ¢å†…å®¹ï¼Œéœ€è¦æ³¨æ„çš„äº‹é¡¹"></a>ç½‘ç»œåº“çš„è½¬æ¢å†…å®¹ï¼Œéœ€è¦æ³¨æ„çš„äº‹é¡¹</h2><ul>
<li>ç”¨æ–°çš„ç½‘ç»œåº“ï¼Œè¯·æ±‚æ¥å£æºå¸¦cookieè¿›è¡Œçš„å®‰å…¨éªŒè¯é—®é¢˜ ï¼ˆéœ€è¦ä¸objcçš„ä½¿ç”¨è¿›è¡Œéš”ç¦»ï¼‰</li>
<li>å¦‚æœä½¿ç”¨ASIè¿›è¡Œè¯·æ±‚æ—¶ï¼Œæ··ç¼–æ˜¯å¦ä¼šå‡ºç°ç±»å‹è½¬æ¢çš„é—®é¢˜</li>
<li>éœ€è¦å¯¹CKDataResult,CKDataServiceè¿›è¡Œæ¡¥æ¥ï¼Œè¿›è¡Œè¯•éªŒ</li>
<li>æ•°æ®è¯·æ±‚æ¨¡å‹çš„æ„å»ºï¼Œä¼šå‡ºç°ç»§æ‰¿Object-cå‡ºç°çš„é—®é¢˜ æ¯”å¦‚CKListDataModel</li>
<li>æ–°å‡ºä¸€å¥—çš„è¯éœ€è¦å¯¹ç½‘ç»œå±‚è¿›è¡Œå°è£…å¤„ç†ï¼Œå…³é”®ç‚¹åœ¨äºcookieå¤„</li>
<li>JsonKitçš„é€‰æ‹©ï¼Œmodelç±»å‹è½¬æ¢çš„é—®é¢˜</li>
</ul>
<h2 id="å›¾ç‰‡åŠ è½½çš„é—®é¢˜"><a href="#å›¾ç‰‡åŠ è½½çš„é—®é¢˜" class="headerlink" title="å›¾ç‰‡åŠ è½½çš„é—®é¢˜"></a>å›¾ç‰‡åŠ è½½çš„é—®é¢˜</h2><ul>
<li>ç‰µæ¶‰åˆ°ç¤¾åŒºå°è§†é¢‘çš„é—®é¢˜</li>
</ul>
<h2 id="ç¼“å­˜çš„é—®é¢˜"><a href="#ç¼“å­˜çš„é—®é¢˜" class="headerlink" title="ç¼“å­˜çš„é—®é¢˜"></a>ç¼“å­˜çš„é—®é¢˜</h2><ul>
<li>åº”è¯¥å¯ä»¥æ¥å—æ¡¥æ¥è½¬æ¢çš„ä½¿ç”¨æ–¹å¼è¿›è¡Œå®Œæˆ</li>
</ul>
<h2 id="UIæ¡†æ¶å±‚çš„é—®é¢˜"><a href="#UIæ¡†æ¶å±‚çš„é—®é¢˜" class="headerlink" title="UIæ¡†æ¶å±‚çš„é—®é¢˜"></a>UIæ¡†æ¶å±‚çš„é—®é¢˜</h2><ul>
<li>ç½‘ç»œè¯·æ±‚å±‚ï¼Œä¸‹æ‹‰åˆ·æ–°ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ¡†æ¶éœ€è¦æŒ‰ç…§Swiftçš„æ€æƒ³é‡æ–°å°è£…ï¼ˆéœ€è¦ä¸objcçš„ä½¿ç”¨è¿›è¡Œéš”ç¦»ï¼‰</li>
</ul>
<h2 id="ä½¿ç”¨Swifté‡æ„-æ–¹æ¡ˆ"><a href="#ä½¿ç”¨Swifté‡æ„-æ–¹æ¡ˆ" class="headerlink" title="ä½¿ç”¨Swifté‡æ„ æ–¹æ¡ˆ"></a>ä½¿ç”¨Swifté‡æ„ æ–¹æ¡ˆ</h2><ul>
<li>ç½‘ç»œå±‚ <a href="https://github.com/Alamofire/Alamofire" target="_blank" rel="external">Alamofire</a></li>
<li>Json è§£æ <a href="https://github.com/SwiftyJSON/SwiftyJSON" target="_blank" rel="external">SwiftyJSON</a></li>
<li>JSON to Model <a href="https://github.com/Hearst-DD/ObjectMapper" target="_blank" rel="external">ObjectMapper</a></li>
<li>å›¾ç‰‡åŠ è½½ <a href="https://github.com/onevcat/Kingfisher" target="_blank" rel="external">Kingfisher</a></li>
<li>è‡ªåŠ¨å¸ƒå±€ <a href="https://github.com/SnapKit/SnapKit" target="_blank" rel="external">SnapKit</a></li>
<li>è®¾è®¡æ¨¡å¼ <a href="https://github.com/ochococo/Design-Patterns-In-Swift" target="_blank" rel="external">Design-Patterns-In-Swift</a></li>
</ul>
<h3 id="éœ€è¦è‡ªè¡Œå®Œå–„çš„SDK"><a href="#éœ€è¦è‡ªè¡Œå®Œå–„çš„SDK" class="headerlink" title="éœ€è¦è‡ªè¡Œå®Œå–„çš„SDK"></a>éœ€è¦è‡ªè¡Œå®Œå–„çš„SDK</h3><ul>
<li>UIKit æ‰©å±•</li>
<li>Foundation æ‰©å±•</li>
<li>ç½‘ç»œå±‚ æ‰©å±•</li>
<li>å›¾ç‰‡åŠ è½½å±‚ æ‰©å±• (å¦‚æœç”¨åˆ°å°è§†é¢‘æ—¶éœ€è¦æ­¤æ‰©å±•)</li>
<li>ä¸‹æ‹‰åˆ·æ–°ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šçš„é€»è¾‘ æ‰©å±•</li>
<li>è·¯ç”±å±‚çš„å¤„ç†</li>
<li>å®šä½é—®é¢˜</li>
<li>åˆ†äº«é—®é¢˜</li>
<li>æ‰«æåº“çš„é—®é¢˜</li>
<li>searchKit scanKit ç­‰ç­‰çš„ä¾èµ–é—®é¢˜è§£å†³ï¼Œä½¿ç”¨è‡ªå·±çš„ä¾èµ–çš„æ—¶å€™ä¸è¦ç”¨å°–æ‹¬å·</li>
<li>webControllerçš„æ”¯æŒï¼ŒåŒ…æ‹¬JSbridgeWebController</li>
</ul>
<h2 id="åˆ¶ä½œæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºéƒ½å…¼å®¹çš„åŠ¨æ€åº“éœ€è¦åŠ å…¥çš„shellè„šæœ¬"><a href="#åˆ¶ä½œæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºéƒ½å…¼å®¹çš„åŠ¨æ€åº“éœ€è¦åŠ å…¥çš„shellè„šæœ¬" class="headerlink" title="åˆ¶ä½œæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºéƒ½å…¼å®¹çš„åŠ¨æ€åº“éœ€è¦åŠ å…¥çš„shellè„šæœ¬"></a>åˆ¶ä½œæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºéƒ½å…¼å®¹çš„åŠ¨æ€åº“éœ€è¦åŠ å…¥çš„shellè„šæœ¬</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;ACTION&#125;</span>"</span> = <span class="string">"build"</span> ]</div><div class="line"></div><div class="line"><span class="keyword">then</span></div><div class="line"></div><div class="line">INSTALL_DIR=<span class="variable">$&#123;SRCROOT&#125;</span>/Products/<span class="variable">$&#123;PROJECT_NAME&#125;</span>.framework</div><div class="line"></div><div class="line">DEVICE_DIR=<span class="variable">$&#123;BUILD_ROOT&#125;</span>/<span class="variable">$&#123;CONFIGURATION&#125;</span>-iphoneos/<span class="variable">$&#123;PROJECT_NAME&#125;</span>.framework</div><div class="line"></div><div class="line">SIMULATOR_DIR=<span class="variable">$&#123;BUILD_ROOT&#125;</span>/<span class="variable">$&#123;CONFIGURATION&#125;</span>-iphonesimulator/<span class="variable">$&#123;PROJECT_NAME&#125;</span>.framework</div><div class="line"></div><div class="line"><span class="keyword">if</span> [ <span class="_">-d</span> <span class="string">"<span class="variable">$&#123;INSTALL_DIR&#125;</span>"</span> ]</div><div class="line"></div><div class="line"><span class="keyword">then</span></div><div class="line"></div><div class="line">rm -rf <span class="string">"<span class="variable">$&#123;INSTALL_DIR&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">mkdir -p <span class="string">"<span class="variable">$&#123;INSTALL_DIR&#125;</span>"</span></div><div class="line"></div><div class="line">cp -R <span class="string">"<span class="variable">$&#123;DEVICE_DIR&#125;</span>/"</span> <span class="string">"<span class="variable">$&#123;INSTALL_DIR&#125;</span>/"</span></div><div class="line"></div><div class="line"><span class="comment">#ditto "$&#123;DEVICE_DIR&#125;/Headers" "$&#123;INSTALL_DIR&#125;/Headers"</span></div><div class="line"></div><div class="line">lipo -create <span class="string">"<span class="variable">$&#123;DEVICE_DIR&#125;</span>/<span class="variable">$&#123;PROJECT_NAME&#125;</span>"</span> <span class="string">"<span class="variable">$&#123;SIMULATOR_DIR&#125;</span>/<span class="variable">$&#123;PROJECT_NAME&#125;</span>"</span> -output <span class="string">"<span class="variable">$&#123;INSTALL_DIR&#125;</span>/<span class="variable">$&#123;PROJECT_NAME&#125;</span>"</span></div><div class="line"></div><div class="line">open <span class="string">"<span class="variable">$&#123;DEVICE_DIR&#125;</span>"</span></div><div class="line"></div><div class="line">open <span class="string">"<span class="variable">$&#123;SRCROOT&#125;</span>/Products"</span></div><div class="line"></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h2 id="æ··ç¼–éœ€è¦æ³¨æ„çš„åœ°æ–¹"><a href="#æ··ç¼–éœ€è¦æ³¨æ„çš„åœ°æ–¹" class="headerlink" title="æ··ç¼–éœ€è¦æ³¨æ„çš„åœ°æ–¹"></a>æ··ç¼–éœ€è¦æ³¨æ„çš„åœ°æ–¹</h2><p>1ã€swiftä¸è®¤è¯†NS_ENUMå®ï¼Œç›´æ¥typedef enumâ€¦ </p>
<p>2ã€DispatchQueue.main.async</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">            <span class="keyword">let</span> topC: <span class="type">UIViewController</span> = <span class="type">UIApplication</span>.shared.topViewController()</div><div class="line">            </div><div class="line">            <span class="comment">//å–æœ€é¡¶éƒ¨çš„vc,å¦‚æœvcçš„navigationControllerå­˜åœ¨ï¼Œåˆ™ç”¨è¯¥navåšå¤„ç†</span></div><div class="line">            <span class="keyword">if</span>  <span class="keyword">let</span> topNav = topC.navigationController &#123;</div><div class="line">            <span class="comment">//æ³¨æ„isKindOfClassçš„è°ƒç”¨</span></div><div class="line">                <span class="keyword">if</span> controller.isKind(of: <span class="type">UINavigationController</span>.<span class="keyword">self</span>) &#123;</div><div class="line">                    topNav.present(controller, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    topNav.pushViewController(controller, animated: <span class="literal">true</span>)</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span> controller.isKind(of: <span class="type">UINavigationController</span>.<span class="keyword">self</span>) &#123;</div><div class="line">                    topC.present(controller, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    topC.present(<span class="type">CLHNavigationController</span>.<span class="keyword">init</span>(rootViewController: controller), animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>3ã€æ³¨æ„NSDictionaryå’ŒDictionaryçš„åŒºåˆ«ï¼Œé€šè¿‡objcä¼ å€¼è¿‡æ¥çš„éƒ½æ˜¯NSDictionary</p>
<p>4ã€NSthread è¦ç”¨Thread</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> waitTime &lt; <span class="number">8.0</span> &amp;&amp; <span class="type">CLHCoreUtil</span>.mainController() == <span class="literal">nil</span> &#123;</div><div class="line">            <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">0.1</span>)</div><div class="line">            waitTime = waitTime + <span class="number">0.1</span></div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>5ã€æ³¨å†Œé€šçŸ¥æˆ–è€…prformSelectorè°ƒç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ³¨å†Œæ¨é€é€šçŸ¥</span></div><div class="line">        <span class="keyword">let</span> notificationDidOpenName = <span class="type">NSNotification</span>.<span class="type">Name</span>(<span class="type">APP_EVENT_PUSH_NOTIFICATION_DID_OPEN</span>)</div><div class="line">        <span class="type">NotificationCenter</span>.<span class="keyword">default</span>.addObserver(<span class="keyword">self</span>, selector: #selector(pushNotificationDidOpen(notification:)), name: notificationDidOpenName, object: <span class="literal">nil</span>)</div><div class="line">        <span class="keyword">let</span> notificationDidReciveName = <span class="type">NSNotification</span>.<span class="type">Name</span>(<span class="type">APP_EVENT_PUSH_NOTIFICATION_DID_RECIVE</span>)</div><div class="line">        <span class="type">NotificationCenter</span>.<span class="keyword">default</span>.addObserver(<span class="keyword">self</span>, selector: #selector(pushNotificationDidOpen(notification:)), name: notificationDidReciveName, object: <span class="literal">nil</span>)</div><div class="line">        </div><div class="line">        </div><div class="line">        <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">pushNotificationDidOpen</span><span class="params">(notification: NSNotification)</span></span> &#123;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">pushNotificationDidRecive</span><span class="params">(notification: NSNotification)</span></span> &#123;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">//peform</span></div><div class="line">        <span class="keyword">self</span>.performSelector(inBackground: #selector(safePushViewController(controller:)), with: navController)</div><div class="line">        <span class="comment">//é€šè¿‡é€šçŸ¥æ‰€è¿›è¡Œçš„ä¸€ç³»åˆ—çš„vcå±•ç¤º</span></div><div class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">safePushViewController</span><span class="params">(controller: UIViewController)</span></span> &#123;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>6ã€ UIAlertView ä¹‹å‘ï¼ŒotherButtonTitleçš„é—®é¢˜</p>
<p>7ã€å¦‚ä½•æ·»åŠ warningæ ‡è¯†,æ·»åŠ  New Run Script Phaseï¼Œç‚¹å‡»äº†ä¹‹åå°±å‡ºç°äº†ä¸‹å›¾çš„Run Scriptæ  ,æ·»åŠ å¦‚ä¸‹shellè„šæœ¬</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">TAGS=<span class="string">"TODO:|FIXME:"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"searching <span class="variable">$&#123;SRCROOT&#125;</span> for <span class="variable">$&#123;TAGS&#125;</span>"</span></div><div class="line">find <span class="string">"<span class="variable">$&#123;SRCROOT&#125;</span>"</span> \( -name <span class="string">"*.swift"</span> \) -print0 | xargs -0 egrep --with-filename --line-number --only-matching <span class="string">"(<span class="variable">$TAGS</span>).*\$"</span> | perl -p <span class="_">-e</span> <span class="string">"s/(<span class="variable">$TAGS</span>)/ warning: \$1/"</span></div></pre></td></tr></table></figure>
<p>8ã€ CGRect å’Œ æšä¸¾å®ä¾‹ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ·»åŠ æ»‘åŠ¨è¿”å›çš„å·¦è¾¹é˜´å½±</span></div><div class="line">        <span class="keyword">let</span> shadowImageView = <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>.<span class="keyword">init</span>(named: <span class="string">"leftside_shadow_bg"</span>))</div><div class="line">        shadowImageView.frame = <span class="type">CGRect</span>(x: -<span class="number">10</span>, y: <span class="number">0</span>, width: <span class="number">10</span>, height: <span class="keyword">self</span>.window!.rootViewController!.view.bounds.height)</div><div class="line">        shadowImageView.autoresizingMask = [.flexibleWidth, .flexibleHeight]</div><div class="line">        <span class="keyword">self</span>.window!.rootViewController!.view.addSubview(shadowImageView)</div></pre></td></tr></table></figure>
<p>9ã€ swiftä¸­æ··ç¼–è°ƒç”¨ocçš„å®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³• QCPWelcomeView ä¸¾ä¾‹</p>
<p>10ã€å…³äºç§æœ‰åº“ä¸­bundleèµ„æºæ–‡ä»¶çš„ç®¡ç†ï¼Œå„ä¸ªframeworkè‡ªå·±ç®¡ç†è‡ªå·±çš„bundleæ–‡ä»¶ï¼Œä¸è¦ä¾èµ–å…¶ä»–ç§æœ‰åº“æˆ–è€…ä»ä¸»é¡¹ç›®ä¸­è·å–ï¼Œå¯ä»¥ä¼ å…¥å®ä¾‹åŒ–çš„èµ„æºé—®ä»·è½½ä½“</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/27/2017-12-01/" data-id="cjbqj4epn0005n462hz7j48q7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2017-12-08" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/27/2017-12-08/" class="article-date">
  <time datetime="2017-11-27T16:04:29.000Z" itemprop="datePublished">2017-11-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/27/2017-12-08/">ç¬¬5æœŸåšå®¢ï¼ˆMoya &amp; ç»˜å›¾ï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ç»˜ç”»ä»£ç "><a href="#ç»˜ç”»ä»£ç " class="headerlink" title="ç»˜ç”»ä»£ç "></a>ç»˜ç”»ä»£ç </h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  ViewController.swift</span></div><div class="line"><span class="comment">//  DrawDemo</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  Created by XcodeYang on 07/12/2017.</span></div><div class="line"><span class="comment">//  Copyright Â© 2017 XcodeYang. All rights reserved.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line">import <span class="built_in">UIKit</span></div><div class="line"></div><div class="line">let numberOfDrawer = <span class="number">30</span></div><div class="line">let drawColor = <span class="built_in">UIColor</span>.yellow</div><div class="line">let lineWidth: <span class="built_in">CGFloat</span> = <span class="number">1.0</span></div><div class="line"></div><div class="line"><span class="keyword">enum</span> PenType: String &#123;</div><div class="line">	<span class="keyword">case</span> pencil = <span class="string">"é“…ç¬”"</span></div><div class="line">	<span class="keyword">case</span> bucket = <span class="string">"æ°´æ¡¶"</span></div><div class="line">	<span class="keyword">case</span> eraser = <span class="string">"æ©¡çš®æ“¦"</span></div><div class="line">	mutating func next() &#123;</div><div class="line">		<span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">		<span class="keyword">case</span> .pencil:</div><div class="line">			<span class="keyword">self</span> = .bucket</div><div class="line">		<span class="keyword">case</span> .bucket:</div><div class="line">			<span class="keyword">self</span> = .eraser</div><div class="line">		<span class="keyword">case</span> .eraser:</div><div class="line">			<span class="keyword">self</span> = .pencil</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> ViewController: <span class="built_in">UIViewController</span> &#123;</div><div class="line">	</div><div class="line">	var pentype = PenType.pencil</div><div class="line">	var drawLayer: <span class="built_in">CAShapeLayer</span>!</div><div class="line">	var drawPaths = [<span class="built_in">CGMutablePath</span>]()</div><div class="line">	@IBOutlet <span class="keyword">weak</span> var penButton: <span class="built_in">UIButton</span>!</div><div class="line">	</div><div class="line">	var historyAllRecords = [<span class="built_in">CAShapeLayer</span>]()</div><div class="line">	var historyShowingRecords = [<span class="built_in">CAShapeLayer</span>]()</div><div class="line">	</div><div class="line">	private func creatNewLayer()-&gt; <span class="built_in">CAShapeLayer</span> &#123;</div><div class="line">		let layer = <span class="built_in">CAShapeLayer</span>()</div><div class="line">		layer.lineWidth = lineWidth;</div><div class="line">		layer.strokeColor = drawColor.cgColor</div><div class="line">		layer.fillColor = penButton.isSelected ? drawColor.cgColor : <span class="built_in">UIColor</span>.clear.cgColor</div><div class="line">		view.layer.addSublayer(layer)</div><div class="line">		<span class="keyword">return</span> layer</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	override func viewDidLoad() &#123;</div><div class="line">		<span class="keyword">super</span>.viewDidLoad()</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	override var prefersStatusBarHidden: Bool &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">true</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	override func touchesBegan(_ touches: Set&lt;<span class="built_in">UITouch</span>&gt;, with event: <span class="built_in">UIEvent</span>?) &#123;</div><div class="line">		<span class="keyword">if</span> pentype == .eraser &#123; <span class="keyword">return</span> &#125;</div><div class="line">		</div><div class="line">		drawPaths.removeAll()</div><div class="line">		drawLayer = creatNewLayer()</div><div class="line">		guard let point = touches.first?.location(<span class="keyword">in</span>: view) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">		(<span class="number">0.</span>..numberOfDrawer).forEach &#123; index <span class="keyword">in</span></div><div class="line">			let path = <span class="built_in">CGMutablePath</span>()</div><div class="line">			path.move(to: convertPointByCenterOfPoint(point: point, index: index))</div><div class="line">			drawPaths.append(path)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	override func touchesMoved(_ touches: Set&lt;<span class="built_in">UITouch</span>&gt;, with event: <span class="built_in">UIEvent</span>?) &#123;</div><div class="line">		</div><div class="line">		guard let point = touches.first?.location(<span class="keyword">in</span>: view) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">		<span class="keyword">if</span> pentype == .eraser &#123;</div><div class="line">			let deleteLayers = historyShowingRecords.filter(&#123; (pathLayer) -&gt; Bool <span class="keyword">in</span></div><div class="line">				<span class="keyword">return</span> pathLayer.path!.contains(point)</div><div class="line">			&#125;)</div><div class="line">			deleteLayers.forEach&#123; $<span class="number">0.</span>removeFromSuperlayer() &#125;</div><div class="line">			<span class="keyword">return</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		drawPaths.enumerated().forEach &#123; (index, path) <span class="keyword">in</span></div><div class="line">			path.addLine(to: convertPointByCenterOfPoint(point: point, index: index))</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">if</span> pentype == .bucket &#123;</div><div class="line">			let resultPath = drawPaths.reduce(<span class="built_in">CGMutablePath</span>(), &#123; (resultPath, nextPath) -&gt; <span class="built_in">CGMutablePath</span> <span class="keyword">in</span></div><div class="line">				let newNext = nextPath.mutableCopy()</div><div class="line">				newNext?.closeSubpath()</div><div class="line">				resultPath.addPath(newNext!)</div><div class="line">				<span class="keyword">return</span> resultPath</div><div class="line">			&#125;)</div><div class="line">			drawLayer.path = resultPath</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			let resultPath = drawPaths.reduce(<span class="built_in">CGMutablePath</span>(), &#123; (resultPath, nextPath) -&gt; <span class="built_in">CGMutablePath</span> <span class="keyword">in</span></div><div class="line">				resultPath.addPath(nextPath)</div><div class="line">				<span class="keyword">return</span> resultPath</div><div class="line">			&#125;)</div><div class="line">			drawLayer.path = resultPath</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	override func touchesEnded(_ touches: Set&lt;<span class="built_in">UITouch</span>&gt;, with event: <span class="built_in">UIEvent</span>?) &#123;</div><div class="line">		<span class="keyword">if</span> pentype == .eraser &#123; <span class="keyword">return</span> &#125;</div><div class="line">		historyShowingRecords.append(drawLayer)</div><div class="line">		historyAllRecords = historyShowingRecords</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	override func touchesCancelled(_ touches: Set&lt;<span class="built_in">UITouch</span>&gt;, with event: <span class="built_in">UIEvent</span>?) &#123;</div><div class="line">		<span class="keyword">if</span> pentype == .eraser &#123; <span class="keyword">return</span> &#125;</div><div class="line">		historyShowingRecords.append(drawLayer)</div><div class="line">		historyAllRecords = historyShowingRecords</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@IBAction func penChange(_ sender: <span class="built_in">UIButton</span>) &#123;</div><div class="line">		pentype.next()</div><div class="line">		sender.setTitle(pentype.rawValue, <span class="keyword">for</span>: .normal)</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@IBAction func backAction(_ sender: <span class="built_in">UIButton</span>) &#123;</div><div class="line">		<span class="keyword">if</span> let deleteLayer = historyShowingRecords.last &#123;</div><div class="line">			deleteLayer.removeFromSuperlayer()</div><div class="line">			historyShowingRecords.removeLast()</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@IBAction func recoverAction(_ sender: Any) &#123;</div><div class="line">		<span class="keyword">if</span> historyShowingRecords.count &lt; historyAllRecords.count &#123;</div><div class="line">			let recoverLayer = historyAllRecords[historyShowingRecords.count]</div><div class="line">			historyShowingRecords.append(recoverLayer)</div><div class="line">			view.layer.addSublayer(recoverLayer)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@IBAction func cleanAction(_ sender: Any) &#123;</div><div class="line">		historyShowingRecords.forEach&#123; $<span class="number">0.</span>removeFromSuperlayer() &#125;</div><div class="line">		historyShowingRecords.removeAll()</div><div class="line">		historyAllRecords.removeAll()</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">extension ViewController &#123;</div><div class="line">	</div><div class="line">	func convertPointByCenterOfPoint(point:<span class="built_in">CGPoint</span>, index:Int) -&gt; <span class="built_in">CGPoint</span> &#123;</div><div class="line">		let center = <span class="built_in">CGPoint</span>(x:view.bounds.width/<span class="number">2.0</span>, y:view.bounds.height/<span class="number">2.0</span>)</div><div class="line">		let increaseAngle = Double.pi * <span class="number">2.0</span> * Double(index) / Double(numberOfDrawer);</div><div class="line">		let radius: Double = sqrt(pow(Double(point.x) - Double(center.x), <span class="number">2</span>) + pow(Double(point.y) - Double(center.y), <span class="number">2</span>))</div><div class="line">		let angle: Double = getAngle(startPoint: center, endPoint: point) + increaseAngle</div><div class="line">		<span class="keyword">return</span> <span class="built_in">CGPoint</span>(x: cos(angle) * radius + Double(center.x), y: sin(angle)*radius + Double(center.y))</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	func getAngle(startPoint:<span class="built_in">CGPoint</span>, endPoint:<span class="built_in">CGPoint</span>) -&gt; Double &#123;</div><div class="line">		let y = Double(endPoint.y - startPoint.y)</div><div class="line">		let x = Double(endPoint.x - startPoint.x)</div><div class="line">		let length = sqrt(y*y + x*x)</div><div class="line">		var rads = asin(y/length)</div><div class="line">		</div><div class="line">		<span class="keyword">if</span> x &lt; <span class="number">0</span> &#123;</div><div class="line">			rads = (Double.pi - rads)</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> rads</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/27/2017-12-08/" data-id="cjbqj4epp0006n462bfmjsd12" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Alamfire/">Alamfire</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Moya/">Moya</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ç»˜å›¾/">ç»˜å›¾</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2017-02-15" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/15/2017-02-15/" class="article-date">
  <time datetime="2017-02-15T16:04:29.000Z" itemprop="datePublished">2017-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/UI/">UI</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/15/2017-02-15/">Autolayoutå’ŒMasronyçš„ä½¿ç”¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#iOSç•Œé¢å¸ƒå±€</p>
<p>ç›®å‰æ¥è¯´iOSç›®å‰å‡ ç§ä¸»æµçš„UIå¸ƒå±€ï¼š</p>
<ul>
<li>Frameå¸ƒå±€</li>
<li>AutoLayout <ul>
<li>ä½¿ç”¨ä»£ç å®ç°AutoLayout</li>
<li>ä½¿ç”¨xibæˆ–è€…StoryBoard<br>åœ¨ä»£ç å¯è¯»æ€§ä¸Š frame &gt; ä½¿ç”¨ä»£ç å®ç°AutoLayout &gt; ä½¿ç”¨xibæˆ–è€…StoryBoard<br>åœ¨å¼€å‘æ•ˆç‡ä¸Š ä½¿ç”¨xibæˆ–è€…StoryBoard &gt; ä½¿ç”¨ä»£ç å®ç°AutoLayout &gt; Frameå¸ƒå±€</li>
</ul>
</li>
</ul>
<p><code>AutoLayout</code>æ˜¯é€šå¸¸æ˜¯é€šè¿‡å®šä¹‰ä¸€ç³»åˆ—çš„çº¦æŸï¼ˆconstrainsï¼‰æ¥è¿›è¡Œå®šçš„ã€‚å’ŒFrameå®šä½ä¸€æ ·ï¼Œå®ƒåŒæ ·éœ€è¦ä½ æä¾›ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯ï¼Œä½†æ˜¯å’ŒFrameä¸åŒçš„æ˜¯ï¼Œå®ƒä¸æ˜¯è®©ä½ ç›´æ¥æä¾›xï¼Œyï¼Œwidthï¼Œheightï¼Œè€Œæ˜¯é€šè¿‡ä½ ç»™çš„çº¦æŸæ¥æ¨æ–­å‡ºç›¸åº”çš„å°ºå¯¸å’Œä½ç½®ã€‚</p>
<h2 id="AutoLayoutæœ¬è´¨"><a href="#AutoLayoutæœ¬è´¨" class="headerlink" title="AutoLayoutæœ¬è´¨"></a>AutoLayoutæœ¬è´¨</h2><p>ä¸€æ¬¡å‡½æ•°ï¼š</p>
<blockquote>
<p>y = ax + b</p>
<p>item1.attribute1 = multiplier Ã— item2.attribute2 + constant</p>
</blockquote>
<p>çœ‹ä¸€æ®µåŸç”Ÿçš„ä»£ç å®ç°AutoLayoutï¼ˆNSLayoutConstraintï¼‰</p>
<p>VFLæ˜¯è¿™ä¹ˆå†™çš„ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSDictionary</span> *viewsDictionary = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:label1,<span class="string">@"label1"</span>,label2,<span class="string">@"label2"</span>,label3,<span class="string">@"label3"</span>,label4,<span class="string">@"label4"</span>, <span class="literal">nil</span>];</div><div class="line"></div><div class="line"><span class="built_in">NSDictionary</span> *metrics = [<span class="built_in">NSDictionary</span> dictionaryWithObject:@(<span class="number">88</span>) forKey:<span class="string">@"labelHeight"</span>];</div><div class="line"></div><div class="line"><span class="built_in">NSArray</span> *constraints = [<span class="built_in">NSLayoutConstraint</span> constraintsWithVisualFormat:<span class="string">@"V:|[label1(labelHeight)]-[label2(labelHeight)]-[label3(labelHeight)]-[label4(labelHeight)]-(&gt;=10)-|"</span> options:<span class="built_in">NSLayoutFormatAlignAllLeft</span> metrics:metrics views:viewsDictionary];</div><div class="line"></div><div class="line">[view addConstraints:constraints];</div></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ç§å†™æ³•ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">view.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</div><div class="line"><span class="built_in">NSLayoutConstraint</span> * constraint = [<span class="built_in">NSLayoutConstraint</span></div><div class="line">                                       constraintWithItem:view             </div><div class="line">                                       attribute:<span class="built_in">NSLayoutAttributeTop</span>          </div><div class="line">                                       relatedBy:<span class="built_in">NSLayoutRelationEqual</span>          </div><div class="line">                                       toItem:view                       </div><div class="line">                                       attribute:<span class="built_in">NSLayoutAttributeTop</span>           </div><div class="line">                                       multiplier:<span class="number">1.0</span>                      </div><div class="line">                                       constant:<span class="number">10</span>];                            </div><div class="line">[view addConstraint:constraint];</div></pre></td></tr></table></figure>
<p>è‹¹æœå¥½åƒä¹Ÿå‘ç°è¿™æ ·å†™æœ‰ç‚¹å°´å°¬ï¼Œäºæ˜¯åœ¨iOS8å’ŒiOS9ä¸­å¯¹autolayoutçš„apiè¿›è¡Œæ”¹åŠ¨ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//iOS8</span></div><div class="line">[<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1 attribute:<span class="built_in">NSLayoutAttributeCenterX</span> relatedBy:<span class="built_in">NSLayoutRelationEqual</span> toItem:view2 attribute:<span class="built_in">NSLayoutAttributeCenterX</span> multiplier:<span class="number">1</span> constant:<span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="comment">//iOS9</span></div><div class="line">view.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</div><div class="line">[view.widthAnchor constraintEqualToConstant:<span class="number">100</span>];</div><div class="line">[view.heightAnchor constraintEqualToConstant:<span class="number">100</span>];</div><div class="line">[view.centerXAnchor constraintEqualToAnchor:view1.centerXAnchor];</div><div class="line">[view.centerYAnchor constraintEqualToAnchor:view1.centerYAnchor];</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ªviewçš„ä½ç½®ç¡®å®šï¼Œæ­£å¸¸æƒ…å†µä¸‹éœ€è¦æ¥è‡ªå†…éƒ¨æˆ–è€…å¤–éƒ¨çš„4æ¡çº¦æŸæ‰èƒ½ç¡®å®šå…¶ä½ç½®ã€‚æ‰€ä»¥ä½¿ç”¨åŸç”Ÿä»£ç å®ç°èµ·æ¥å¤ªè¿‡ç¹çï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†NSLayoutConstraintç®€åŒ–å°è£…ä½¿ç”¨å°±éå¸¸æœ‰å¿…è¦äº†ï¼Œå¼€æºé¡¹ç›®ä¸­æœ‰å¾ˆå¤šé¡¹ç›®å·²ç»å¾ˆæˆç†Ÿäº†ï¼Œæ¯”å¦‚Masonryå’Œpurelayoutç­‰ï¼Œä¸‹é¢ç®€å•ä»‹ç»Masonryã€‚</p>
<h2 id="Masonryçš„ä»‹ç»"><a href="#Masonryçš„ä»‹ç»" class="headerlink" title="Masonryçš„ä»‹ç»"></a>Masonryçš„ä»‹ç»</h2><p>Masonryæ˜¯iOSåœ¨æ§ä»¶å¸ƒå±€ä¸­ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªè½»é‡çº§æ¡†æ¶ï¼ŒMasonryè®©NSLayoutConstraintä½¿ç”¨èµ·æ¥æ›´ä¸ºç®€æ´ã€‚Masonryç®€åŒ–äº†NSLayoutConstraintçš„ä½¿ç”¨æ–¹å¼ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä»¥é“¾å¼çš„æ–¹å¼ä¸ºæˆ‘ä»¬çš„æ§ä»¶æŒ‡å®šçº¦æŸã€‚</p>
<p><strong>ä½¿ç”¨Masonryå®Œæˆä¸Šé¢çš„ä»£ç </strong></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[view mas_makeConstraints:^(MASConstraintMaker *make) &#123;</div><div class="line">    make.top.equalTo(@(<span class="number">10</span>));</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>å½“ç„¶ä¸€æ¡çº¦æŸä»€ä¹ˆéƒ½å¹²ä¸äº†,å®Œæˆä¸€ä¸ªViewçš„å¸ƒå±€ï¼Œè‡³å°‘æœ‰4ä¸ªæ¥è‡ªå†…éƒ¨æˆ–è€…å¤–éƒ¨çš„çº¦æŸï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[view mas_makeConstraints:^(MASConstraintMaker *make) &#123;</div><div class="line">    make.top.equalTo(@(<span class="number">10</span>));</div><div class="line">    make.left.equalTo(@(<span class="number">10</span>));</div><div class="line">    make.bottom.equalTo(@(<span class="number">-10</span>));</div><div class="line">    make.right.equalTo(@(<span class="number">-10</span>));</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>Masonryæœ€é‡è¦çš„4ä¸ªæ–¹æ³•</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *  Finds the closest common superview between this view and another view</div><div class="line"> *</div><div class="line"> *  @param  view    other view</div><div class="line"> *</div><div class="line"> *  @return returns nil if common superview could not be found</div><div class="line"> */</div><div class="line">- (<span class="keyword">instancetype</span>)mas_closestCommonSuperview:(MAS_VIEW *)view;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  Creates a MASConstraintMaker with the callee view.</div><div class="line"> *  Any constraints defined are added to the view or the appropriate superview once the block has finished executing</div><div class="line"> *</div><div class="line"> *  @param block scope within which you can build up the constraints which you wish to apply to the view.</div><div class="line"> *</div><div class="line"> *  @return Array of created MASConstraints</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(MASConstraintMakerConfigBlock)block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  Creates a MASConstraintMaker with the callee view.</div><div class="line"> *  Any constraints defined are added to the view or the appropriate superview once the block has finished executing.</div><div class="line"> *  If an existing constraint exists then it will be updated instead.</div><div class="line"> *</div><div class="line"> *  @param block scope within which you can build up the constraints which you wish to apply to the view.</div><div class="line"> *</div><div class="line"> *  @return Array of created/updated MASConstraints</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSArray</span> *)mas_updateConstraints:(MASConstraintMakerConfigBlock)block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  Creates a MASConstraintMaker with the callee view.</div><div class="line"> *  Any constraints defined are added to the view or the appropriate superview once the block has finished executing.</div><div class="line"> *  All constraints previously installed for the view will be removed.</div><div class="line"> *</div><div class="line"> *  @param block scope within which you can build up the constraints which you wish to apply to the view.</div><div class="line"> *</div><div class="line"> *  @return Array of created/updated MASConstraints</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSArray</span> *)mas_remakeConstraints:(MASConstraintMakerConfigBlock)block;</div></pre></td></tr></table></figure>
<h3 id="MASViewConstraintçš„å¯¹è±¡é“¾å¼è°ƒç”¨"><a href="#MASViewConstraintçš„å¯¹è±¡é“¾å¼è°ƒç”¨" class="headerlink" title="MASViewConstraintçš„å¯¹è±¡é“¾å¼è°ƒç”¨"></a>MASViewConstraintçš„å¯¹è±¡é“¾å¼è°ƒç”¨</h3><p>å¦‚ä½•å®ç°é“¾å¼è°ƒç”¨</p>
<p>Masonryä¸­å¤§é‡çš„ä½¿ç”¨äº†é“¾å¼è°ƒç”¨çš„ï¼Œæ¯”å¦‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">view.top.left.equalTo(superView).offset(<span class="number">10</span>);</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„è¿™ç§æ–¹å¼å°±æ˜¯é“¾å¼è°ƒç”¨ï¼Œè€Œä¸”åƒequalTo(superView)è¿™ç§å½¢å¼ä¹Ÿä¸æ˜¯Objective-Cä¸­å‡½æ•°è°ƒç”¨çš„æ–¹å¼ï¼Œåœ¨Objective-Cä¸­æ˜¯é€šè¿‡[]æ¥è°ƒç”¨å‡½æ•°çš„ï¼Œè€Œæ­¤å¤„ä½¿ç”¨äº†()ã€‚æ¥ä¸‹æ¥è®²åˆ†æè¿™ç§é“¾å¼çš„è°ƒç”¨æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> ClassB;</div><div class="line">interface ClassA : <span class="built_in">NSObject</span></div><div class="line"></div><div class="line"><span class="comment">// 1. å®šä¹‰ä¸€äº› block å±æ€§</span></div><div class="line">property(<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) ClassA *(^aaa)(<span class="built_in">BOOL</span> enable);</div><div class="line">property(<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) ClassA *(^bbb)(<span class="built_in">NSString</span>* str);</div><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) ClassB *(^ccc)(<span class="built_in">NSString</span>* str);</div><div class="line"></div><div class="line">@implement ClassA</div><div class="line"></div><div class="line"><span class="comment">// 2. å®ç°è¿™äº› block æ–¹æ³•ï¼Œblock è¿”å›å€¼ç±»å‹å¾ˆå…³é”®ï¼Œå½±å“ç€ä¸‹ä¸€ä¸ªé“¾å¼</span></div><div class="line">- (ClassA *(^)(<span class="built_in">BOOL</span>))aaa</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> ^(<span class="built_in">BOOL</span> enable) &#123;</div><div class="line">        <span class="comment">//code</span></div><div class="line">        <span class="keyword">if</span> (enable) &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ClassA yes"</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ClassA no"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (ClassA *(^)(<span class="built_in">NSString</span> *))bbb</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> ^(<span class="built_in">NSString</span> *str)) &#123;</div><div class="line">        <span class="comment">//code</span></div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, str);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// è¿™é‡Œè¿”å›äº†ClassBçš„ä¸€ä¸ªå®ä¾‹ï¼Œäºæ˜¯åé¢å°±å¯ä»¥ç»§ç»­é“¾å¼ ClassB çš„ block æ–¹æ³•</span></div><div class="line"><span class="comment">// è§ä¸‹é¢ä¾‹å­ .ccc(@"Objective-C").ddd(NO)</span></div><div class="line">- (ClassB * (^)(<span class="built_in">NSString</span> *))ccc</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> ^(<span class="built_in">NSString</span> *str) &#123;</div><div class="line">        <span class="comment">//code</span></div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, str);</div><div class="line">        ClassB* b = [[ClassB alloc] initWithString:ccc];</div><div class="line">        <span class="keyword">return</span> b;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//------------------------------------------</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ClassB</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) ClassB *(^ddd)(<span class="built_in">BOOL</span> enable);</div><div class="line"></div><div class="line">- (<span class="keyword">id</span>)initWithString:(<span class="built_in">NSString</span> *)str;</div><div class="line"></div><div class="line">@implement ClassB</div><div class="line"></div><div class="line">- (ClassB *(^)(<span class="built_in">BOOL</span>))ddd</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> ^(<span class="built_in">BOOL</span> enable) &#123;</div><div class="line">        <span class="comment">//code</span></div><div class="line">        <span class="keyword">if</span> (enable) &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ClassB yes"</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ClassB no"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æœ€åæˆ‘ä»¬å¯ä»¥è¿™æ ·åš</span></div><div class="line"><span class="keyword">id</span> a = [ClassA new];</div><div class="line">a.aaa(<span class="literal">YES</span>).bbb(<span class="string">@"HelloWorld!"</span>).ccc(<span class="string">@"Objective-C"</span>).ddd(<span class="literal">NO</span>)</div></pre></td></tr></table></figure>
<p>offset(10)è¿™ç§è°ƒç”¨æ–¹å¼æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (MASConstraint * (^)(<span class="built_in">CGFloat</span>))offset &#123;</div><div class="line">    <span class="keyword">return</span> ^<span class="keyword">id</span>(<span class="built_in">CGFloat</span> offset)&#123;</div><div class="line">        <span class="keyword">self</span>.offset = offset;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸éš¾å‘ç°ï¼Œoffsetæ˜¯ä¸€ä¸ªgetteræ–¹æ³•çš„åï¼Œoffsetå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåŒ¿åBlock, ä¹Ÿå°±æ˜¯offsetåè¾¹çš„()ã€‚è¿™ä¸ªåŒ¿åé—­åŒ…æœ‰ä¸€ä¸ªCGFloatçš„å‚æ•°ï¼Œä¸ºäº†æ”¯æŒé“¾å¼è°ƒç”¨è¯¥åŒ¿åé—­åŒ…è¿”å›ä¸€ä¸ªMASConstraintçš„å¯¹è±¡ã€‚</p>
<p>ä¼˜åŒ–UITableViewCellé«˜åº¦è®¡ç®—çš„é‚£äº›äº‹:</p>
<p><a href="https://github.com/forkingdog/UITableView-FDTemplateLayoutCell" target="_blank" rel="external">https://github.com/forkingdog/UITableView-FDTemplateLayoutCell</a></p>
<p><a href="http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/" target="_blank" rel="external">http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/15/2017-02-15/" data-id="cjbqj4epg0001n462yth2cm21" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/autolayout/">autolayout</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-11-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/01/2016-11-01/" class="article-date">
  <time datetime="2016-11-01T16:04:29.000Z" itemprop="datePublished">2016-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/å…¶ä»–/">å…¶ä»–</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/01/2016-11-01/">MarkDownè¯­æ³•åœ¨iOSå·¥ç¨‹å¸ˆè§’åº¦çš„ä¸€äº›è¿ç”¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>è¿™é‡Œä¸€ç¯‡æ€»ç»“çš„æŒºå…¨çš„ï¼Œå¯ä»¥çœ‹çœ‹<br><a href="http://www.appinn.com/markdown/" target="_blank" rel="external">http://www.appinn.com/markdown/</a></p>
</blockquote>
<p><strong>æ¨èä¸‹è½½ä½¿ç”¨å¼€æºçš„markdownå·¥å…·MacDown</strong></p>
<ul>
<li>é©¬å…‹é£è±¡çš„Markdownï¼ŒæŸ¥çœ‹ç¤ºä¾‹</li>
<li>Swiftçš„markdownè¿ç”¨</li>
<li>é¡¹ç›®æ–‡æ¡£åŒ–å·¥å…· Jazzy</li>
<li>HEXO åšå®¢å¼•æ“</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/01/2016-11-01/" data-id="cjbqj4epb0000n462s23hnq2e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/markdown/">markdown</a></li></ul>

    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/UI/">UI</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/share/">share</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/å…¶ä»–/">å…¶ä»–</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Alamfire/">Alamfire</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Moya/">Moya</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSLogger/">NSLogger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SafeKit/">SafeKit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/autolayout/">autolayout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hitTest/">hitTest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/m34/">m34</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nextResponder/">nextResponder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/responder-chain/">responder chain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ··æ·†/">æ··æ·†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç»˜å›¾/">ç»˜å›¾</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Alamfire/" style="font-size: 10px;">Alamfire</a> <a href="/tags/Moya/" style="font-size: 10px;">Moya</a> <a href="/tags/NSLogger/" style="font-size: 10px;">NSLogger</a> <a href="/tags/SafeKit/" style="font-size: 10px;">SafeKit</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/autolayout/" style="font-size: 10px;">autolayout</a> <a href="/tags/hitTest/" style="font-size: 10px;">hitTest</a> <a href="/tags/m34/" style="font-size: 10px;">m34</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/nextResponder/" style="font-size: 10px;">nextResponder</a> <a href="/tags/responder-chain/" style="font-size: 10px;">responder chain</a> <a href="/tags/æ··æ·†/" style="font-size: 10px;">æ··æ·†</a> <a href="/tags/ç»˜å›¾/" style="font-size: 10px;">ç»˜å›¾</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/12/28/2017-12-28/">ç¬¬7æœŸåšå®¢ï¼ˆæŸ¥è¿ç« æ—¥å¿—ç³»ç»Ÿçš„æ¥å…¥NSLoggerï¼‰</a>
          </li>
        
          <li>
            <a href="/2017/12/22/2017-12-22/">ç¬¬6æœŸåšå®¢ï¼ˆå“åº”é“¾ï¼‰</a>
          </li>
        
          <li>
            <a href="/2017/11/27/2017-11-27/">ç¬¬ä¸‰æœŸåšå®¢ï¼ˆSafeKitï¼Œæ··æ·†ï¼Œm34ï¼‰</a>
          </li>
        
          <li>
            <a href="/2017/11/27/2017-12-01/">ç¬¬4æœŸåšå®¢ï¼ˆæ··ç¼–å°è¯•ï¼‰</a>
          </li>
        
          <li>
            <a href="/2017/11/27/2017-12-08/">ç¬¬5æœŸåšå®¢ï¼ˆMoya &amp; ç»˜å›¾ï¼‰</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>